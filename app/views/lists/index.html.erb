<div class="container">
  <h1>Lista de Tarefas</h1>
<% if flash[:notice] %>
  <p class="notice"><%= flash[:notice] %></p>
<% end %>
<!-- FormulÃ¡rio para criar uma nova lista -->
<%= form_with model: @list, url: lists_path, local: true do |form| %>
  <%= form.text_field :name, placeholder: 'Nome da Lista' %>
  <%= form.submit 'Criar Lista', class: 'submit-button' %>
<% end %>

<!-- Exibir as listas e suas tarefas -->
<% if @lists.empty? %>
  <p>Nenhuma lista encontrada.</p>
<% else %>
  <% @lists.each do |list| %>
    <div class="list">
      <details>
      <summary><%= list.name %></summary>

      <!-- FormulÃ¡rio para adicionar tarefa -->
      <%= form_with model: @task, url: list_tasks_path(list), local: true, html: {class: 'task-form'} do |form| %>
        <%= form.text_field :title, placeholder: 'Nome da Tarefa' %>
        <%= form.submit 'Adicionar Tarefa' %>
      <% end %>

      <!-- Exibir tarefas -->
      <% if list.tasks.empty? %>
        <p>Sem tarefas ainda.</p>
      <% else %>
        <ul>
          <% list.tasks.each do |task| %>
            <li>
              <%= task.title %>
              <%= form_with url: list_task_path(list, task), method: :delete, local: true do %>
                <%= submit_tag 'Remover', data: { confirm: 'Tem certeza?' }, class: 'delete-button' %>
              <% end %>
            </li>
          <% end %>
        </ul>
      <% end %>
    </details>
    </div>
  <% end %>
<% end %>
</div>